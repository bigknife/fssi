package fssi.interpreter

import fssi.ast.domain._
import fssi.ast.domain.types.Contract.UserContract
import fssi.ast.domain.types._

class ContractStoreHandler extends ContractStore.Handler[Stack] {
  override def findContract(name: Contract.Name,
                            version: Contract.Version): Stack[Option[Contract]] = Stack {
    import Contract.inner._
    (name, version) match {
      case (TransferContract.name, TransferContract.version) => Some(TransferContract)
      case (PublishContract.name, PublishContract.version)   => Some(PublishContract)
      case (Contract.Name(n), Contract.Version(v))           =>
        val demo = UserContract(
          Contract.Name("com.test"),
          Contract.Version("0.0.1"),
          Contract.Code("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"),
          BytesValue.decodeBase64("tQ+33pyTbwbTtDxPQt+jed5/ajPQCJzZEU1x0DVbp2Y=")
        )
        Some(demo)
        //None //todo: find from ledger or snapshot
      case _ => None
    }
  }
}
object ContractStoreHandler {
  private val instance = new ContractStoreHandler
  trait Implicits {
    implicit val contractStoreHandler: ContractStoreHandler = instance
  }
  object implicits extends Implicits
}
